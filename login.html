<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link href="css/stylesheet.css" rel="stylesheet" type="text/css">
  <title>Gaelyk Functional Test Tools - Testing applications that use the default GAE authentication mechanism - version 0.2</title>

  <link type="text/css" rel="stylesheet" href="css/shCore.css"></link>
  <link type="text/css" rel="stylesheet" href="css/shThemeEclipse.css"></link>
  <script language="javascript" src="js/shCore.js"></script>
  <script language="javascript" src="js/shBrushGroovy.js"></script>
  <script type="text/javascript" src="js/jquery-1.6.1.min.js"></script>
  <script type="text/javascript" src="js/syntaxhighlight.js"></script>
  <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-15031038-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

  </script>
</head>

<body>
  <div id="wrapper">
    <div id="header">
      <span class="left">&#x25C0; <a href="setup-data.html">DSL for setting up datastore state</a></span>
      <span class="center"><a href="index.html">Table of Contents</a></span>
      <span class="right"><a href="project.html">Changelog</a> &#x25B6;</span>
    </div>
    <hr />
    <div class="page_toc">
      <h3>Chapter Contents</h3>
      <ul><li><span class='toc_number'>5</span><a href='login.html#testing_applications_that_use_the_default_gae_authentication_mechanism'>Testing applications that use the default GAE authentication mechanism</a><ul><li><span class='toc_number'>5.1</span><a href='login.html#examples'>Examples</a></li></ul></li></ul>
    </div>
    <hr />
    <h1><span id='testing_applications_that_use_the_default_gae_authentication_mechanism'>5</span> Testing applications that use the default GAE authentication mechanism</h1>

<p>For applications using the <a href="https://developers.google.com/appengine/articles/auth">default GAE authentication mechanism</a> you might want to test if your application behaves as expected for logged in users and sometimes you might need to log in into the application to access certain parts of it, i.e. administration pages. This is where <code>LoginCategory</code> which provides <code>loginTo</code> method comes in handy.</p>

<h2><span id='examples'>5.1</span> Examples</h2>

<p>To use <code>loginTo</code> method you have to first annotate your specification with <code>@Use(LoginCategory)</code></p>

<pre><code>@Use(LoginCategory)
class NeedsToLoginSpec extends GebSpec {
}
</code></pre>

<p>After that you can use the <code>loginTo</code> method just like <a href="http://www.gebish.org/manual/current/api/geb/Browser.html#to%28java.lang.Class,%20java.lang.Object%29"><code>to</code> method from Geb</a> with the exception that first too parameters are <code>username</code> of the logged in user and <code>isAdmin</code>, a switch to specify if the logged in user should have admin rights for the application.</p>

<pre><code>loginTo('foo@example.com', false, MyPage) //login a non-admin user foo@example.com and go to MyPage
loginTo('admin@example.com', true, MyPage) //login an admin user admin@example.com and go to MyPage
loginTo('foo@example.com', false, MyPage, 'custom parameter') //login a non-admin user foo@example.com and go to MyPage passing 'custom parameter' to convertToPath() of the page
loginTo('foo@example.com', false, MyPage, arg: 'value') //login a non-admin user foo@example.com and go to MyPage with 'arg' appended to the query string
</code></pre>

    <hr />
    <div id="footer">
      <span class="left">&#x25C0; <a href="setup-data.html">DSL for setting up datastore state</a></span>
      <span class="center"><a href="index.html">Table of Contents</a></span>
      <span class="right"><a href="project.html">Changelog</a> &#x25B6;</span>
    </div>
  </div>
  <p style="text-align: center">
    Gaelyk Functional Test Tools Documentation - 0.2 - December, 2012<br />
    Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>
  </p>
</body>
</html>
